=======================
Using the web interface
=======================

The web interface is built using the Django_  web
framework, and requires that Django be installed (see :doc:`installation`).

For a single project
--------------------

Before using the web interface, you must have created a Sumatra project using
``smt init``.

To launch the web interface, in your project directory run::

    $ smtweb &


This will launch a simple web server that listens on port 8000, and will
automatically open a new tab in your browser at http://127.0.0.1:8000/. You can specify 
the ``-n`` option which will disable automatic opening of the new tab::

    $ smtweb -n

If port 8000 is already in use, you can specify a different port with the ``-p``
option to ``smtweb``, e.g.::

    $ smtweb -p 8001

If your project does not contain any records, the record store will be created and at the initial
web page the modal window will be displayed. In that window you should specify the name of the executable
which you intend to use:

.. figure:: /images/img1.png  
 :scale: 70 %
 :align: center

Web interface is consisted from the three principal pages:
     - List of projects
     - List of records
     - About page 
Each time you start Sumatra web interface the initial will be the **list of projects** page.

Executing Sumatra from the web interface
----------------------------------------
You can run Sumatra on **list of records** page and in case you have the empty project, this page
will have nothing except the button. By clicking it the **new simulation** dialog window will be opened.

.. figure:: /images/img2.png  
 :scale: 70 %
 :align: center

You can specify **label**, **reason**, **tag**, **main file**, **arguments**, and **executable** there. The **executable**
option will be already filled, however you can change it for any new record. **Main file** and **arguments** are
drop-down lists with the names of the files from the folder of Sumatra project. As soon as the file is picked up from the
list, you can see the content. More than that, the **argument** file is editable and the changes can be saved from this web page. You can hide and open the content of the files by clicking the corresponding links below the drop-down list.

.. figure:: /images/img3.png  
 :scale: 70 %
 :align: center

For multiple projects
---------------------

If you are using a single record store for multiple projects, you can start
``smtweb`` with the path to your record store database file, e.g.::

    $ smtweb ~/sumatra.db
    
You can also use the ``-p`` option here.

Finishing up
------------

Don't forget to kill the webserver process (e.g. with ``fg``, ``Ctrl-C``) when you are
finished with it.

Customizing the web interface
-----------------------------

You can customize the web interface on a per-project basis by placing your own
`Django templates`_ in a "templates" subdirectory of the Sumatra ".smt" directory.
The templates you can customize are called "base.html", "record_list.html",
"show_file.html", "project_detail.html", "show_csv.html", "show_image.html",
"record_detail.html", "show_diff.html", "tag_list.html". The best way to proceed
is to copy the default template from "/path/to/sumatra/web/templates"
to "/path/to/myproject/.smt/templates" and then modify it.

.. _Django: http://www.djangoproject.com/
.. _`Django templates`: http://docs.djangoproject.com/en/1.2/topics/templates/