<div id='new-rec' class='modal'>
    <div style="margin-top:3px; height:42px; line-height:34px; font-size:16px; background-color:Lavender; padding-left:10px;">
    New simulation
        <div id='col-newrec' style='width:30px; float:right; background-color:AliceBlue;font-size:28px; padding:10px;cursor: pointer;'>
            <i class='pagin icon-chevron-left'></i><i class='pagin icon-chevron-left'></i>
        </div>
    </div>
        <!-- <div style='position:absolute; margin-top:50px'> -->
        <div class = 'd-newrec'>
            <label class='control-label' for='mLabel'>Label</label> 
            <input id='mLabel' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mReason'>Reason</label> 
            <textarea id='mReason' class='input-medium' type='text'></textarea>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mTag'>Tag</label> 
            <input id='mTag' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mExec'>Executable path</label> 
            <input id='mExec' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mFile'>Main file</label> 
            <input id='mFile' class='input-medium' type='text'>  
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mArg'>Arguments</label>
            <input id='mArg' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <button id='btn_run' class='btn btn-success btn-large' style='width:150px; display: block ;margin-left: auto; margin-right: auto;'>Run</button>
        </div>
<!--    

            
                
            <div class='mod_input'>
                <div id='mArg'><a></a></div>
                <div>
                    <button id='select-arg' class="btn" href="#" style='margin-top:2px; margin-bottom:2px'>Open</button> 
                </div>
                <input id="fileInput" class="input-file" type="file" style='position:absolute; top:-100px;'>
                <a href='/{{project_name}}/?n=true'><button id='btn_run' class='btn btn-success btn-large' style='width:150px; display: block ;margin-left: auto; margin-right: auto;'>Run</button></a>
            </div> -->
        <!-- </div> -->
</div>
<!-- <div class="modal" id="mod_newrec"> 
    <div class='d-mod'>  
        <div style='float:left;padding:3px 15px;position:absolute; margin-top:5px'><h3>new record</h3></div><a class="close s-close" id='close_newrec'>&times;</a>
        <div style='position:absolute; margin-top:50px'>
            <label class='control-label' for='mLabel'>Label</label> 
            <div class='mod_input'>
                <input id='mLabel' class='input-xlarge' type='text'>
            </div>
            <label class='control-label' for='mReason'>Reason</label> 
            <div class='mod_input'>
                <textarea id='mReason' class='input-xlarge' type='text'></textarea>
            </div>
            <label class='control-label' for='mTag'>Tag</label> 
            <div class='mod_input'>
                <input id='mTag' class='input-xlarge' type='text'>
            </div>
            <label class='control-label' for='mExec'>Executable path</label> 
            <div class='mod_input'>
                <input id='mExec' class='input-xlarge' type='text'>
            </div>
            <label class='control-label' for='mFile'>Main file</label> 
            <div class='mod_input'>
                <input id='mFile' class='input-xlarge' type='text'>  
            </div>
            <label class='control-label' for='mArg'>Arguments</label>    
            <div class='mod_input'>
                <div id='mArg'><a></a></div>
                <div>
                    <button id='select-arg' class="btn" href="#" style='margin-top:2px; margin-bottom:2px'>Open</button> 
                </div>
                <input id="fileInput" class="input-file" type="file" style='position:absolute; top:-100px;'>
                <a href='/{{project_name}}/?n=true'><button id='btn_run' class='btn btn-success btn-large' style='width:150px; display: block ;margin-left: auto; margin-right: auto;'>Run</button></a>
            </div>
        </div>
    </div>
</div>
 -->
<script type = 'text/javascript'>
$(document).ready(function(){ 
    $("#select-arg").click(function(){
        $("#fileInput").click();
    });
    $('input[type=file]').change(function(e){
      $in=$(this);
      $('#mArg a').html($in.val());
    });
    $('#mArg a').on('click', function(){    //code here is repeted the one in table.js
        var nbWind = $('.resizable').length;
        $.ajax({
          type: 'GET',
          url: 'nolabel/datafile',
          data: {show_args: true, name: $in.val()}
        }).done(function(data) {  

            id = ['code_wind',nbWind].join('');
                $el = $('<div/>', {
                    id: id,
                    class: 'resizable'
                });

                $el.appendTo('#wrapper_code');
                 var editor = CodeMirror(document.getElementById(id), {
                    mode: {name: "python",
                           version: 2,
                           singleLineStringErrors: false},
                    lineNumbers: true,
                    indentUnit: 4,
                    tabMode: "shift",
                    matchBrackets: true
                  });
                editor.setOption("theme", "ambiance"); 
                //this way we hide the element. CodeMirrow is the new div.   
                $('.resizable').css('display','block')
                               .css('height','0px')
                               .css('width','0px');  
                editor.setValue(data);
                editor.refresh();
                $(".CodeMirror").draggable({handle:"div.ui-widget-header", snap: true});
                $(".CodeMirror").resizable();
            });
    });
});
</script>