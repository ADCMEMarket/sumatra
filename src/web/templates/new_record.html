<div id='new-rec' class='modal'>
    <div style="margin-top:3px; height:42px; line-height:34px; font-size:16px; background-color:Lavender; padding-left:10px;">
    New simulation
        <div id='col-newrec' style='width:30px; float:right; background-color:AliceBlue;font-size:28px; padding:10px;cursor: pointer;'>
            <i class='pagin icon-chevron-left'></i><i class='pagin icon-chevron-left'></i>
        </div>
    </div>
        <!-- <div style='position:absolute; margin-top:50px'> -->
        <div class = 'd-newrec'>
            <label class='control-label' for='mLabel'>Label</label> 
            <input id='mLabel' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mReason'>Reason</label> 
            <textarea id='mReason' class='input-medium' type='text'></textarea>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mTag'>Tag</label> 
            <input id='mTag' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mExec'>Executable path</label> 
            <input id='mExec' class='input-medium' type='text'>
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mFile'>Main file</label> 
            <input id='mFile' class='input-medium' type='text'>  
        </div>
        <div class = 'd-newrec'>
            <label class='control-label' for='mArg'>Arguments</label>
            <select data-placeholder="" class="chzn-select" id='select-arg'>
                    <option value="">&nbsp;</option> 
                    {% for item in files %}
                        <option value="{{item}}">{{item}}</option>
                    {% endfor %}
            </select>
            <div><a id='file-arg' href='#'></a></div>
        </div>
        <div class = 'd-newrec'>
            <button id='btn_run' class='btn btn-success btn-large' style='width:150px; display: block ;margin-left: auto; margin-right: auto;'>Run</button>
        </div>
</div>
<div id='arg-cont' class='modal'>
    <div style="margin-top:3px; height:42px; line-height:34px; font-size:16px; background-color:Lavender;">
        <div id='col-arg' style='width:30px; float:left; background-color:AliceBlue;font-size:28px; padding:10px;cursor: pointer;'>
            <i class='pagin icon-chevron-right'></i><i class='pagin icon-chevron-right'></i>
        </div>
        <span id = 'name-arg' style='padding-left:10px;'></span>
    </div>
    <div id='file-cont'></div>

    <div>
      <button id='btn_save-arg' class='btn btn-success btn-large' style='width:150px; display: block ;margin-left: auto; margin-right: auto; margin-top:20px'>Save</button>
    </div>
</div>
<script type = 'text/javascript'>
$(document).ready(function(){ 
     var editor = CodeMirror.fromTextArea(document.getElementById('file-cont'), {
                    lineNumbers: true,
                    theme: 'ambiance'
                });

     $(".chzn-select-deselect").chosen({allow_single_deselect:true});

     $(".chzn-select").chosen().change(function(event){
        if (event.target.value.length > 0){
             $('#file-arg').html('show content');
        } else {
             $('#file-arg').html('');
             $('#arg-cont').css('display', 'none');
        }
    });

     $('#file-arg').click(function(){
        if ($('#file-arg').html().indexOf('show') >= 0){
            $('#arg-cont').css('display', 'block')
                          .css('top', $('.navbar-fixed-top').height() + 0.2);
            $('#file-arg').html('hide content');
            $('#name-arg').html($(".chzn-single span").html());
            var target = $(".chzn-single span").html();   
            $.ajax({
              type: 'GET',
              url: 'nolabel/datafile',
              data: {show_args: true, name: target}
            }).done(function(data) {  
                editor.setValue(data);
            });
        }else{
            $('#arg-cont').css('display', 'none');
            $('#file-arg').html('show content');
        }
     });

     $('#btn_save-arg').on('click', function(){
          var content = editor.getValue();
          var arg_file = $(".chzn-single span").html();
          $.post("/{{project_name}}/simulation", {'content':content, 'arg_file':arg_file}); 
     });
});
</script>